<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Fusion App</title>
    <meta name="description" content="Go Fusion - Connect, Share & Earn XP">

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Go Fusion App">
    <meta property="og:description" content="Join Go Fusion and earn rewards!">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/og-image.png">

    <!-- App Links Meta Tags -->
    <meta property="al:ios:app_store_id" content="6503088235">
    <meta property="al:ios:app_name" content="Go Fusion App">
    <meta property="al:android:package" content="com.gofusionapp.gofusionapp">
    <meta property="al:android:app_name" content="Go Fusion App">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 24px;
            padding: 40px 30px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #E91E8C 0%, #F06292 100%);
            border-radius: 20px;
            margin: 0 auto 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: white;
            font-weight: bold;
        }

        .app-name {
            font-size: 28px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
        }

        .tagline {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .content-box {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .content-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .content-title {
            font-size: 20px;
            font-weight: 600;
            color: #E91E8C;
            margin-bottom: 8px;
        }

        .content-description {
            color: #555;
            font-size: 14px;
            line-height: 1.5;
        }

        .code-box {
            background: #e8f5e9;
            border: 2px dashed #4CAF50;
            border-radius: 12px;
            padding: 12px 16px;
            margin-top: 16px;
            font-family: monospace;
            font-size: 14px;
            color: #2e7d32;
            word-break: break-all;
        }

        .open-app-btn {
            display: block;
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, #E91E8C 0%, #F06292 100%);
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            cursor: pointer;
        }

        .open-app-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(233, 30, 140, 0.4);
        }

        .store-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .store-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: #1a1a2e;
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-size: 12px;
            transition: background 0.2s;
        }

        .store-btn:hover {
            background: #2d2d44;
        }

        .store-btn svg {
            width: 24px;
            height: 24px;
        }

        .store-btn span {
            text-align: left;
            line-height: 1.2;
        }

        .store-btn .small {
            font-size: 10px;
            opacity: 0.8;
        }

        .store-btn .big {
            font-size: 14px;
            font-weight: 600;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 24px 0;
            color: #999;
            font-size: 12px;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #ddd;
        }

        .divider span {
            padding: 0 12px;
        }

        .footer {
            margin-top: 30px;
            color: #999;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">GF</div>
        <h1 class="app-name">Go Fusion</h1>
        <p class="tagline" id="tagline">Connect, Share & Earn XP</p>

        <div class="content-box" id="contentBox">
            <div class="content-icon" id="contentIcon">üéÅ</div>
            <h2 class="content-title" id="contentTitle">You've been invited!</h2>
            <p class="content-description" id="contentDescription">
                Someone wants you to join Go Fusion. Download the app and start earning XP rewards!
            </p>
            <div class="code-box" id="codeBox" style="display: none;"></div>
        </div>

        <button class="open-app-btn" id="openAppBtn" onclick="openApp()">
            Open in Go Fusion
        </button>

        <div class="divider"><span>Don't have the app?</span></div>

        <div class="store-buttons">
            <a href="https://apps.apple.com/us/app/go-fusion-app/id6503088235" class="store-btn" target="_blank">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                </svg>
                <span>
                    <span class="small">Download on the</span><br>
                    <span class="big">App Store</span>
                </span>
            </a>
            <a href="https://play.google.com/store/apps/details?id=com.gofusionapp.gofusionapp&hl=en" class="store-btn" target="_blank">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"/>
                </svg>
                <span>
                    <span class="small">Get it on</span><br>
                    <span class="big">Google Play</span>
                </span>
            </a>
        </div>

        <p class="footer">Go Fusion App</p>
    </div>

    <script>
        // Parse the current URL path
        const path = window.location.pathname;
        const pathParts = path.split('/').filter(Boolean);

        // Deep link configuration
        let deepLinkType = 'home';
        let deepLinkValue = '';
        let appScheme = 'gofusion://';

        // Detect link type and customize content
        if (pathParts[0] === 'invite' && pathParts[1]) {
            deepLinkType = 'invite';
            deepLinkValue = pathParts[1];

            document.getElementById('contentIcon').textContent = 'üéÅ';
            document.getElementById('contentTitle').textContent = 'Get 150 XP!';
            document.getElementById('contentDescription').textContent =
                'You\'ve been invited to join Go Fusion! Use this referral code to earn bonus XP.';
            document.getElementById('codeBox').style.display = 'block';
            document.getElementById('codeBox').textContent = 'GOFUSION/' + deepLinkValue.toUpperCase();

            // Update meta tags for social sharing
            document.querySelector('meta[property="og:title"]').content = 'Join Go Fusion & Get 150 XP!';
            document.querySelector('meta[property="og:description"]').content =
                'Use referral code ' + deepLinkValue.toUpperCase() + ' to earn bonus XP rewards!';

        } else if (pathParts[0] === 'posts' && pathParts[1]) {
            deepLinkType = 'post';
            deepLinkValue = pathParts[1];

            document.getElementById('contentIcon').textContent = 'üì±';
            document.getElementById('contentTitle').textContent = 'View this post';
            document.getElementById('contentDescription').textContent =
                'Someone shared a post with you on Go Fusion. Open the app to view it!';
            document.getElementById('codeBox').style.display = 'none';

            // Update meta tags for social sharing
            document.querySelector('meta[property="og:title"]').content = 'Check out this post on Go Fusion!';
            document.querySelector('meta[property="og:description"]').content =
                'Open Go Fusion to view this shared post.';
        }

        // Function to open the app
        function openApp() {
            let deepLink = appScheme;

            if (deepLinkType === 'invite') {
                deepLink = appScheme + 'invite/' + deepLinkValue;
            } else if (deepLinkType === 'post') {
                deepLink = appScheme + 'posts/' + deepLinkValue;
            }

            // Try to open the app
            const startTime = Date.now();

            // Create hidden iframe to try opening the app
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = deepLink;
            document.body.appendChild(iframe);

            // Also try direct location change as fallback
            setTimeout(() => {
                window.location.href = deepLink;
            }, 100);

            // If still on page after delay, app probably isn't installed
            setTimeout(() => {
                document.body.removeChild(iframe);
                if (Date.now() - startTime < 2000) {
                    // User likely doesn't have the app, could show store buttons more prominently
                }
            }, 1500);
        }

        // Auto-attempt to open app on mobile devices
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // On mobile, try to open app automatically after a short delay
        if (isMobile() && (deepLinkType === 'invite' || deepLinkType === 'post')) {
            setTimeout(() => {
                openApp();
            }, 500);
        }
    </script>
</body>
</html>
